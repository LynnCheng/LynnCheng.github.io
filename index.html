<!DOCTYPE html>
<html >
<head>
  <meta charset="utf-8">
  
  <title>LynnCheng</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="LynnCheng">
<meta property="og:url" content="http://lynncheng.github.io/index.html">
<meta property="og:site_name" content="LynnCheng">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="LynnCheng">
<meta name="twitter:description">
  
    <link rel="alternative" href="/atom.xml" title="LynnCheng" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
      <link href="//cdn.bootcss.com/animate.css/3.5.0/animate.min.css" rel="stylesheet">
  
  
  
      <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
      <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">
  
  <link rel="stylesheet" href="/css/style.css">
  
      <style> .article { opacity: 0;} </style>
  
  <link href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  
    
    
  
  
      <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">
  
  <script src="//cdn.bootcss.com/jquery/1.9.1/jquery.min.js"></script>
  <script src="//cdn.bootcss.com/clipboard.js/1.5.9/clipboard.min.js"></script>
  <script>
      var yiliaConfig = {
          fancybox: true,
          animate: true,
          isHome: true,
          isPost: false,
          isArchive: false,
          isTag: false,
          isCategory: false,
          open_in_new: false,
          fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
          scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.0.9/scrollreveal.min.js"
      }
  </script>

  
      <script>
          yiliaConfig.rootUrl = "/";
      </script>
  

  
  
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="/img/avatar.png" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">Lynn Cheng</a></h1>
        </hgroup>

        
                


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">主页</a></li>
                        
                            <li><a href="/archives/">所有文章</a></li>
                        
                            <li><a href="/tags/">标签云</a></li>
                        
                            <li><a href="/about/">关于我</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="mailto:77708550@qq.com" title="Email"></a>
                            
                                <a class="fa GitHub" target="_blank" href="#" title="GitHub"></a>
                            
                                <a class="fa RSS" target="_blank" href="/atom.xml" title="RSS"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/ios/">ios</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ssl/">ssl</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/swift/">swift</a></li></ul>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="https://hexo.io">Hexo</a>
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="https://pages.github.com/">GitHub</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">程序猿一枚</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">Lynn Cheng</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="/img/avatar.png" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">Lynn Cheng</a></h1>
            </hgroup>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/archives/">所有文章</a></li>
                
                    <li><a href="/tags/">标签云</a></li>
                
                    <li><a href="/about/">关于我</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="mailto:77708550@qq.com" title="Email"></a>
                            
                                <a class="fa GitHub" target="_blank" href="#" title="GitHub"></a>
                            
                                <a class="fa RSS" target="_blank" href="/atom.xml" title="RSS"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="标签" friends="友情链接" about="关于我"/>
</nav>
      <div class="body-wrap">
  
    <article id="post-iOS-不常用功能" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2019/08/16/iOS-不常用功能/" class="article-date">
      <time datetime="2019-08-16T06:34:39.000Z" itemprop="datePublished">2019-08-16</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/08/16/iOS-不常用功能/">iOS 不常用功能</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <ol>
<li>UIVisualEffectView、UIBlurEffect</li>
<li>UISearchBar、UISearchContainerViewController、UISearchController  </li>
<li>UISplitViewController:左右视图 </li>
<li>UUID</li>
<li><p>UIDevice.current.identifierForVendor.uuidString 是给Vendor标识用户用的，每个设备在所属同一个Vender的应用里，都有相同的值。其中的Vender是指应用提供商，但准确点说，是通过BundleID的反转的前两部分进行匹配</p>
</li>
<li><p>字符串处理函数<br>a. Scanner</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var uint64:UInt64 = 0</span><br><span class="line">print(Scanner(string: &quot;0xdd&quot;).scanHexInt64(&amp;uint64))</span><br><span class="line">print(uint64)</span><br></pre></td></tr></table></figure>
<p>b. removeAll</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var str = &quot;a:b:123&quot;</span><br><span class="line">str.removeAll &#123; return &quot;123&quot;.contains($0)&#125;   //a:b:</span><br></pre></td></tr></table></figure>
<p>c. drop</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var str = &quot;aaa:b:a:123&quot;</span><br><span class="line">let substr = str.drop &#123; (c) -&gt; Bool in </span><br><span class="line">c == &quot;a&quot;&#125;</span><br><span class="line">print(substr)   //&quot;:b:a:123&quot;</span><br></pre></td></tr></table></figure>
<p>d. filter</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">let cast = [&quot;Vivien&quot;, &quot;Marlon&quot;, &quot;Kim&quot;, &quot;Karl&quot;]</span><br><span class="line">   let shortNames = cast.filter &#123; $0.count &lt; 5 &#125;</span><br><span class="line">   print(shortNames) //[&quot;Kim&quot;, &quot;Karl&quot;]</span><br></pre></td></tr></table></figure>
<p>e. PersonNameComponents</p>
<ol>
<li>NSClassFromString: 这个方法判断类是否存在；如果这个函数返回nil，原因有可能为：<br>a. swift 写的代码必须将“-ObjC”标志添加到“Other Linker Flags”构建设置<br>b. 未加载！ 在Other Linker Flags 中添加配置：-all_load 加载所有<br>NSStringFromClass<br>NSSelectorFromString: 判断某个方法是否存在<br>NSProtocolFromString<br>//应用场景：第三方库版本变更？ 父类中调用子类的函数？<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">let selector = NSSelectorFromString(&quot;remove&quot;)</span><br><span class="line">if self.responds(to: selector) &#123;</span><br><span class="line"> 	self.perform(selector)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ol>
<ol>
<li>Range (0..&lt;5)、  ClosedRange (0…5)</li>
<li>Result</li>
</ol>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Android-入门" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2019/08/16/Android-入门/" class="article-date">
      <time datetime="2019-08-16T01:56:23.000Z" itemprop="datePublished">2019-08-16</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/08/16/Android-入门/">Android 入门</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <ol>
<li><p>布局方式<br>a. xml布局<br>b. 代码布局：LinearLayout</p>
</li>
<li><p>控件<br>a. Button<br>b. TextView<br>c. ImageView …</p>
</li>
<li><p>四大组件<br>a. 服务<br>b. activity<br>c. content provider<br>d. broadcast receiver</p>
</li>
<li><p>Context</p>
</li>
<li><p>Application</p>
</li>
<li></li>
</ol>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-iOS提升" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2019/08/02/iOS提升/" class="article-date">
      <time datetime="2019-08-02T06:15:48.000Z" itemprop="datePublished">2019-08-02</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/08/02/iOS提升/">iOS开发能力提升</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <ol>
<li><p>关联对象Associated Object，相关函数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">objc_getAssociatedObject(id _Nonnull object, const void * _Nonnull key)</span><br><span class="line">objc_setAssociatedObject(id _Nonnull object, const void * _Nonnull key,</span><br><span class="line">                        id _Nullable value, objc_AssociationPolicy policy)</span><br></pre></td></tr></table></figure>
<p>可能的应用场景：给系统控件增加属性</p>
</li>
<li><p>关键字：dynamic 动态属性</p>
</li>
<li><p>runtime</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">appInit() &#123;</span><br><span class="line">        let test = class_getInstanceMethod(UIViewController.self,   #selector(UIViewController.viewDidLoad))</span><br><span class="line">        let test2 = class_getInstanceMethod(UIViewController.self,    #selector(UIViewController.newMethod))</span><br><span class="line">       method_exchangeImplementations(test!, test2!)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">extension UIViewController &#123;</span><br><span class="line">   @objc func newMethod() &#123;</span><br><span class="line">       #if DEBUG</span><br><span class="line">       DLog(&quot;\(type(of: self)) was loaded by \(type(of: self.parent))&quot;)</span><br><span class="line">       #endif</span><br><span class="line"></span><br><span class="line">       self.newMethod()</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>struct和class之间的抉择：<br>a. 默认选struct: 拷贝赋值型，影响相对较小<br>b. 与OC交互时，需要使用class型<br>c. 需要区分不同实例的时候，使用class(操作符===)</p>
</li>
<li><p>KVO/KVC/Keypath/NSKeyValueObservation !!!</p>
</li>
<li>单例<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">//通用单例</span><br><span class="line">class Singleton &#123;</span><br><span class="line">    static let sharedInstance = Singleton()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//如果初始化的时候，需要进行其他操作</span><br><span class="line">class Singleton &#123;</span><br><span class="line">    static let sharedInstance: Singleton = &#123;</span><br><span class="line">        let instance = Singleton()</span><br><span class="line">        // setup code</span><br><span class="line">        return instance</span><br><span class="line">    &#125;()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-guzh" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2019/07/17/guzh/" class="article-date">
      <time datetime="2019-07-17T03:39:20.000Z" itemprop="datePublished">2019-07-17</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/07/17/guzh/">踩坑记录</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="alamofire验证证书"><a href="#alamofire验证证书" class="headerlink" title="alamofire验证证书"></a>alamofire验证证书</h2><p>故障现象：xcode log日志显示如下错误，并且相关请求出错<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">2019-07-17 11:38:19.396278+0800 Homecare[10181:3941027] CredStore - performQuery - Error copying matching creds.  Error=-25300, query=&#123;</span><br><span class="line">    class = inet;</span><br><span class="line">    &quot;m_Limit&quot; = &quot;m_LimitAll&quot;;</span><br><span class="line">    ptcl = htps;</span><br><span class="line">    &quot;r_Attributes&quot; = 1;</span><br><span class="line">    sdmn = Users;</span><br><span class="line">    srvr = &quot;cloud.demo.cn&quot;;</span><br><span class="line">    sync = syna;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>原因：ios系统验证网站的证书出错 （ps:不过不知道什么原因，这个故障是偶现的^）<br>处理：无条件信任我们自己的服务器，不需要进行证书校验<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">init() &#123;</span><br><span class="line">    //关闭认证</span><br><span class="line">    let configuration = URLSessionConfiguration.default</span><br><span class="line">    configuration.httpAdditionalHeaders = Alamofire.SessionManager.defaultHTTPHeaders</span><br><span class="line">    configuration.urlCredentialStorage = nil</span><br><span class="line">    </span><br><span class="line">    let policies: [String: ServerTrustPolicy] = [</span><br><span class="line">        &quot;cloud.demo.cn&quot;: .disableEvaluation</span><br><span class="line">    ]</span><br><span class="line">    </span><br><span class="line">    super.init(configuration: configuration,serverTrustPolicyManager: ServerTrustPolicyManager(policies: policies))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="手动添加的自动布局代码不生效"><a href="#手动添加的自动布局代码不生效" class="headerlink" title="手动添加的自动布局代码不生效"></a>手动添加的自动布局代码不生效</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">let subView = UIView()</span><br><span class="line">let left = NSLayoutConstraint(item: videoView, attribute: .left, relatedBy: .equal, toItem: view, attribute: .left, multiplier: 1, constant: 0)</span><br><span class="line">let right = NSLayoutConstraint(item: videoView, attribute: .right, relatedBy: .equal, toItem: view, attribute: .right, multiplier: 1, constant: 0)</span><br><span class="line">let top = NSLayoutConstraint(item: videoView, attribute: .top, relatedBy: .equal, toItem: view, attribute: .top, multiplier: 1, constant: 0)</span><br><span class="line">let bottom = NSLayoutConstraint(item: videoView, attribute: .bottom, relatedBy: .equal, toItem: view, attribute: .bottom, multiplier: 1, constant: 0)</span><br><span class="line">let constraints = [left, right, top, bottom]</span><br><span class="line">NSLayoutConstraint.activate(constraints)</span><br></pre></td></tr></table></figure>
<p>故障现象：运行的时候发现subview自动生成了midx=0,midy=0,height=0,width=0的约束代码<br>解决方案：关掉自动生成约束代码的功能<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">let subView = UIView()</span><br><span class="line">subview.translatesAutoresizingMaskIntoConstraints = false</span><br><span class="line">.......</span><br></pre></td></tr></table></figure></p>
<h2 id="ATS报错"><a href="#ATS报错" class="headerlink" title="ATS报错"></a>ATS报错</h2><p>故障现象：<br>app发送<a href="https://cloud.fanmiot.cn/rest/things请求，结果返回ats报错，日志如下：" target="_blank" rel="external">https://cloud.fanmiot.cn/rest/things请求，结果返回ats报错，日志如下：</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">2019-07-23 09:26:33.044872+0800 Homecare[5571:122357] Task &lt;5547B0FE-DA52-400E-AF8E-D97453C9F2B0&gt;.&lt;1&gt; finished with error - code: -1022</span><br><span class="line">2019-07-23 09:26:33.046236+0800 Homecare[5571:122356] Task &lt;5547B0FE-DA52-400E-AF8E-D97453C9F2B0&gt;.&lt;1&gt; load failed with error Error Domain=NSURLErrorDomain Code=-1022 &quot;The resource could not be loaded because the App Transport Security policy requires the use of a secure connection.&quot; UserInfo=&#123;NSLocalizedDescription=The resource could not be loaded because the App Transport Security policy requires the use of a secure connection., NSErrorFailingURLStringKey=http://undefined/rest/things, NSErrorFailingURLKey=http://undefined/rest/things, _NSURLErrorRelatedURLSessionTaskErrorKey=(</span><br><span class="line">    &quot;LocalDataTask &lt;5547B0FE-DA52-400E-AF8E-D97453C9F2B0&gt;.&lt;1&gt;&quot;</span><br><span class="line">), _NSURLErrorFailingURLSessionTaskErrorKey=LocalDataTask &lt;5547B0FE-DA52-400E-AF8E-D97453C9F2B0&gt;.&lt;1&gt;, NSUnderlyingError=0x600003f18b10 &#123;Error Domain=kCFErrorDomainCFNetwork Code=-1022 &quot;(null)&quot;&#125;&#125; [-1022]</span><br></pre></td></tr></table></figure></p>
<p>故障原因：<br><a href="https://cloud.fanmiot.cn/rest/things不可达时，服务器端自动跳转到了http://undefined/rest/things页面" target="_blank" rel="external">https://cloud.fanmiot.cn/rest/things不可达时，服务器端自动跳转到了http://undefined/rest/things页面</a>……</p>
<h2 id="视图不显示"><a href="#视图不显示" class="headerlink" title="视图不显示"></a>视图不显示</h2><p>故障现象：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">class aViewController &#123;</span><br><span class="line">	override func viewDidLoad() &#123;</span><br><span class="line">    	super.viewDidLoad()</span><br><span class="line">        </span><br><span class="line">        let vc = bTabelViewController()</span><br><span class="line">        view.addsubView(vc.view)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>问题原因：<br>vc是函数内的局部变量，函数执行结束就被释放掉了；bTabelViewController的cell是根据数据动态生成的；而这些数据也随着vc的释放而消失了……<br>所以需要将let vc = bTabelViewController() 移到函数外</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-ios-导航栏" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2019/07/05/ios-导航栏/" class="article-date">
      <time datetime="2019-07-05T03:20:30.000Z" itemprop="datePublished">2019-07-05</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/07/05/ios-导航栏/">ios 导航栏</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>将导航栏设置为透明<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">   //背景设置为空</span><br><span class="line">self.navigationController?.navigationBar.setBackgroundImage(UIImage(), forBarMetrics: .Default)</span><br><span class="line">   //去除横线</span><br><span class="line">   self.navigationController?.navigationBar.shadowImage = UIImage()</span><br><span class="line">   //设置为透明</span><br><span class="line">   self.navigationController?.navigationBar.isTranslucent = true</span><br></pre></td></tr></table></figure></p>
<p>导航栏的颜色随着滚动条上翻渐渐从透明变成不透明<br>此时注意，一定需要将istranslucent设为true，不然不管怎么改alpha值，导航栏都会有背景色。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">func scrollViewDidScroll(_ scrollView: UIScrollView) &#123;</span><br><span class="line"></span><br><span class="line">    let offset = scrollView.contentOffset.y</span><br><span class="line">    //大标题模式下的数值</span><br><span class="line">    if offset &lt;= -88 &#123;</span><br><span class="line">        naviAlpha = 0</span><br><span class="line">    &#125; else if offset &lt; -22 &#123;</span><br><span class="line">        naviAlpha = (offset+88)/64</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        naviAlpha = 1</span><br><span class="line">    &#125;</span><br><span class="line">    let image = UIImage.imageWithColor(Colors.naviBackground.withAlphaComponent(naviAlpha))</span><br><span class="line">    navigationController?.navigationBar.setBackgroundImage(image, for: .default)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-iOS动画" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2019/07/01/iOS动画/" class="article-date">
      <time datetime="2019-07-01T05:39:18.000Z" itemprop="datePublished">2019-07-01</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/07/01/iOS动画/">iOS动画</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <ol>
<li><p>锚点（参考 <a href="https://www.cnblogs.com/ybw123321/p/5394408.html）" target="_blank" rel="external">https://www.cnblogs.com/ybw123321/p/5394408.html）</a><br>视图的平移、翻转都是以锚点为中心进行，所以希望达到向某个点<br>实例可以参考：<a href="https://github.com/LynnCheng/DropdownMenu" target="_blank" rel="external">https://github.com/LynnCheng/DropdownMenu</a></p>
</li>
<li><p>基础动画：<br><a href="https://www.jianshu.com/p/71f2fa270b9c" target="_blank" rel="external">https://www.jianshu.com/p/71f2fa270b9c</a></p>
</li>
<li><p>核心动画<br><a href="https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/CoreAnimation_guide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40004514" target="_blank" rel="external">https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/CoreAnimation_guide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40004514</a></p>
</li>
</ol>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-创建pod-私库" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2019/06/05/创建pod-私库/" class="article-date">
      <time datetime="2019-06-05T02:35:57.000Z" itemprop="datePublished">2019-06-05</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/06/05/创建pod-私库/">创建pod 私库</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <ol>
<li><p>在服务器上创建一个git工程，</p>
</li>
<li><p>使用pod命令创建swift工程，pod将自动帮你完成xcode的很多操作</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod lib create HubKit</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改第一步生成的HubKit.podspec文件，主要包括：<br>s.summary<br>s.homepage<br>s.source   改成第一步路径<br>增加  s.swift_version = ‘4.0’</p>
</li>
<li><p>将整个工程上传到第一个创建的git服务器</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git add .</span><br><span class="line">git commit -a -m &quot;init&quot;</span><br><span class="line">git push</span><br><span class="line">git tag 0.1.0</span><br><span class="line">git push --tag</span><br></pre></td></tr></table></figure>
</li>
<li><p>检查pod库</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod lib lint</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>如果有以下出错提示：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- ERROR | [iOS] unknown: Encountered an unknown error (Could not find a `ios` simulator (valid values: com.apple.coresimulator.simruntime.ios-12-2, com.apple.coresimulator.simruntime.tvos-12-2, com.apple.coresimulator.simruntime.watchos-5-2). Ensure that Xcode -&gt; Window -&gt; Devices has at least one `ios` simulator listed or otherwise add one.) during validation.</span><br></pre></td></tr></table></figure></p>
<p>解决方案：更新pod<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gem install -n /usr/local/bin cocoapods</span><br></pre></td></tr></table></figure></p>
<ol>
<li><p>检查spec文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod spec lint</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建私库并上传到私库服务器</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pod repo add HubKit https://git.dev.tencent.com/chenglini/podSpec.git</span><br><span class="line">pod repo push HubKit HubKit.podspec --sources=https://git.dev.tencent.com/chenglini/podSpec.git</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用的时候，在podfile文件中加入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">source &apos;https://git.dev.tencent.com/chenglini/podSpec.git&apos;</span><br><span class="line">...</span><br><span class="line">pod &apos;HubKit&apos;</span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-ios-远程推送-本地推送" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2019/05/28/ios-远程推送-本地推送/" class="article-date">
      <time datetime="2019-05-28T03:57:15.000Z" itemprop="datePublished">2019-05-28</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/05/28/ios-远程推送-本地推送/">ios 远程推送/本地推送</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <ol>
<li><p>Notification Service Extension中，更改推送消息的声音</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bestAttemptContent.sound = UNNotificationSound.init(named: UNNotificationSoundName(&quot;ring.caf&quot;))</span><br></pre></td></tr></table></figure>
<p>注意：</p>
<ul>
<li>ring.caf 需要同时加入app 主target和消息推送的target</li>
<li>格式为wav、caf、aiff</li>
<li>mac系统自带转换工具： afconvert Submarine.aiff sub.caf -d ima4 -f caff -v</li>
<li>avplayer在后台是没法直接使用的</li>
</ul>
</li>
<li></li>
</ol>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-AudioPlayer播放没有声音" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2019/04/30/AudioPlayer播放没有声音/" class="article-date">
      <time datetime="2019-04-30T07:33:03.000Z" itemprop="datePublished">2019-04-30</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/04/30/AudioPlayer播放没有声音/">AudioPlayer播放没有声音</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>问题代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">class CallManager: NSObject &#123;</span><br><span class="line">    static let shared = CallManager()</span><br><span class="line">    ...</span><br><span class="line">    func ring() &#123; //响铃</span><br><span class="line">        let audio = AVAudioSession.sharedInstance()</span><br><span class="line">        do &#123;</span><br><span class="line">            try audio.setCategory(.ambient)</span><br><span class="line">            try audio.setActive(true)</span><br><span class="line">            guard let file = Bundle.main.path(forResource: &quot;shake_sound.mp3&quot;, ofType: nil) else &#123;</span><br><span class="line">                return</span><br><span class="line">            &#125;</span><br><span class="line">            let url = URL(string: file)</span><br><span class="line">            let player = try? AVAudioPlayer(contentsOf: url!)</span><br><span class="line">            player?.volume = 1</span><br><span class="line">            player?.prepareToPlay()</span><br><span class="line">            player?.play()</span><br><span class="line">        &#125; catch &#123;</span><br><span class="line">            print(error)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>解决方案：<br>把player的定义从函数中提出来，定义成全局变量<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">class CallManager: NSObject &#123;</span><br><span class="line">    static let shared = CallManager()</span><br><span class="line">    ...</span><br><span class="line">    var player:AVAudioPlayer? = nil</span><br><span class="line">    func ring() &#123; //响铃</span><br><span class="line">        let audio = AVAudioSession.sharedInstance()</span><br><span class="line">        do &#123;</span><br><span class="line">            ...</span><br><span class="line">            player = try? AVAudioPlayer(contentsOf: url!)</span><br><span class="line">            ...</span><br><span class="line">        &#125; catch &#123;</span><br><span class="line">            print(error)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-present、dismiss问题" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2019/04/30/present、dismiss问题/" class="article-date">
      <time datetime="2019-04-30T02:33:33.000Z" itemprop="datePublished">2019-04-30</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/04/30/present、dismiss问题/">present、dismiss问题</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>Q：从vc1 present vc2， 从 vc2 present vc3，如何退出vc3和vc2<br>A: 在vc1执行dismiss</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2016-2019 Lynn Cheng
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减 Hexo 双栏博客主题">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i>
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" >本站到访数: 
                            <span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>, </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit">本页阅读量: 
                            <span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
    </div>
    
<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.1.22/require.min.js"></script>




<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>